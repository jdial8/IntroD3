<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="./d3/d3.min.js"></script>


</head>
<body>

<h2> trying out D3 </h2>

<div class = "container"
	<div id = "barchart"></div>
</div>


<script>
  d3.json("wealth.json", function(error, data){
  	dataset= data;

  	if (error) {
  		console.log(error);
  	}
  	else {
  	makesomething();
    }
  	});

  function makesomething(){
  		//console.log(dataset);
  	

  	
  var margin = {top: 200, right: 75, bottom: 75, left: 75};
  var width = 800 - margin.left - margin.right;
  var height = 800 - margin.left - margin.right;


  var xScale = d3.scaleOrdinal()
     //.domain([d3.extent(dataset, function(d) {return d.Race})]) 
     .domain([dataset.map(function (d) {return d.Race})])
     .range([0, width]);  

  var yScale = d3.scaleLinear()
     .domain([0, d3.max(dataset, function(d) {return d.amount})]) //from 0 to highest amount in data
     .range([0, height]); //lower values will appear higher on the screen

  // create the svg
  var svg = d3.select("#barchart") //select the class with id barchart
    .append('svg')
    .attr("width", width)
    .attr("height", height);

  var g = svg.append('g')
    .attr('transform', 'translate(' + margin.left + ',' + margin.right + ')');

  g.selectAll(".bar")
  	.data(dataset)
  	.enter()
  	.append("rect")
  	.attr("class", "bar")
  	.attr("x", function(d) {return xScale(d.Race)})
  	.attr("y", 0)
  	.attr("width", 20)
  	.attr("height", function(d) {return yScale(d.amount)});
  

  // y axis

  svg.append('g')
    .attr('transform', 'translate(' + margin.left + ',' + margin.right + ')')
    .call(d3.axisLeft(yScale));

  svg.append("text")
    .attr("y", height/2)
    .attr("x", margin.left/2)
    .style("text-anchor", "middle")
    .text("y-axis label");
  
  // x axis
  svg.append('g')
    .attr('transform', 'translate(' + margin.left + ',' + margin.right + ')')
    .call(d3.axisTop(xScale));

  svg.append("text")
    .attr("y", margin.left)
    .attr("x", width - 5)
    .style("text-anchor", "middle")
    .text("x-axis label");


  // title & subtitle
  svg.append("text")
    .attr("y", margin.top/10)
    .attr("x", width/2)
    .style("text-anchor", "middle")
    .style("font-size", "22px")
    .text("Graph Title");

  svg.append("text")
    .attr("y", margin.top/6)
    .attr("x", width/2)
    .style("text-anchor", "middle")
    .style("font-size", "18px")
    .text("Graph Subtitle");

  };

</script>

</body>
</html>
